/*! Lity - v2.2.2 - 2016-12-14
* http://sorgalla.com/lity/
* Copyright (c) 2015-2016 Jan Sorgalla; Licensed MIT */
!function(n,t){"function"==typeof define&&define.amd?define(["jquery"],function(i){return t(n,i)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(n,require("jquery")):n.lity=t(n,n.jQuery||n.Zepto)}("undefined"!=typeof window?window:this,function(n,t){"use strict";function p(n){var t=v();return tt&&n.length?(n.one(tt,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function o(n,i,r){if(1===arguments.length)return t.extend({},n);if("string"==typeof i){if("undefined"==typeof r)return"undefined"==typeof n[i]?null:n[i];n[i]=r}else t.extend(n,i);return this}function l(n){for(var i,r=decodeURI(n.split("#")[0]).split("&"),u={},t=0,f=r.length;t<f;t++)r[t]&&(i=r[t].split("="),u[i[0]]=i[1]);return u}function s(n,i){return n+(n.indexOf("?")>-1?"&":"?")+t.param(i)}function h(n,t){var i=n.indexOf("#");return-1===i?t:(i>0&&(n=n.substr(i)),t+n)}function it(n){return t('<span class="lity-error"/>').append(n)}function w(n,i){var e=i.opener()&&i.opener().data("lity-desc")||"Image with no description",u=t('<img src="'+n+'" alt="'+e+'"/>'),r=v(),f=function(){r.reject(it("Failed loading image"))};return u.on("load",function(){return 0===this.naturalWidth?f():void r.resolve(u)}).on("error",f),r.promise()}function rt(n,i){var r,u,f;try{r=t(n)}catch(n){return!1}return!!r.length&&(u=t('<i style="display:none !important"/>'),f=r.hasClass("lity-hide"),i.element().one("lity:remove",function(){u.before(r).remove();f&&!r.closest(".lity-content").length&&r.addClass("lity-hide")}),r.removeClass("lity-hide").after(u))}function ut(n){var i=pt.exec(n);return!!i&&e(h(n,s("https://www.youtube"+(i[2]||"")+".com/embed/"+i[4],t.extend({autoplay:1},l(i[5]||"")))))}function ft(n){var i=wt.exec(n);return!!i&&e(h(n,s("https://player.vimeo.com/video/"+i[3],t.extend({autoplay:1},l(i[4]||"")))))}function et(n){var i=kt.exec(n);return!!i&&(0!==n.indexOf("http")&&(n="https:"+n),e(h(n,s("https://www.facebook.com/plugins/video.php?href="+n,t.extend({autoplay:1},l(i[4]||""))))))}function ot(n){var t=bt.exec(n);return!!t&&e(h(n,s("https://www.google."+t[3]+"/maps?"+t[6],{output:t[6].indexOf("layer=c")>0?"svembed":"embed"})))}function e(n){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+n+'"/><\/div>'}function b(){return u.documentElement.clientHeight?u.documentElement.clientHeight:Math.round(a.height())}function k(n){var t=g();t&&(27===n.keyCode&&t.close(),9===n.keyCode&&st(n,t))}function st(n,t){var i=t.element().find(vt),r=i.index(u.activeElement);n.shiftKey&&r<=0?(i.get(i.length-1).focus(),n.preventDefault()):n.shiftKey||r!==i.length-1||(i.get(0).focus(),n.preventDefault())}function d(){t.each(i,function(n,t){t.resize()})}function ht(n){1===i.unshift(n)&&(nt.addClass("lity-active"),a.on({resize:d,keydown:k}));t("body > *").not(n.element()).addClass("lity-hidden").each(function(){var n=t(this);void 0===n.data(c)&&n.data(c,n.attr(f)||null)}).attr(f,"true")}function ct(n){var r;n.element().attr(f,"true");1===i.length&&(nt.removeClass("lity-active"),a.off({resize:d,keydown:k}));i=t.grep(i,function(t){return n!==t});r=i.length?i[0].element():t(".lity-hidden");r.removeClass("lity-hidden").each(function(){var n=t(this),i=n.data(c);i?n.attr(f,i):n.removeAttr(f);n.removeData(c)})}function g(){return 0===i.length?null:i[0]}function lt(n,i,r,u){var e,o="inline",f=t.extend({},r);return u&&f[u]?(e=f[u](n,i),o=u):(t.each(["inline","iframe"],function(n,t){delete f[t];f[t]=r[t]}),t.each(f,function(t,r){return!r||!(!r.test||r.test(n,i))||(e=r(n,i),!1!==e?(o=t,!1):void 0)})),{handler:o,content:e||""}}function at(n,i,r,e){function k(n){c=t(n).css("max-height",b()+"px");h.find(".lity-loader").each(function(){var n=t(this);p(n).always(function(){n.remove()})});h.removeClass("lity-loading").find(".lity-content").empty().append(c);a=!0;c.trigger("lity:ready",[s])}var l,h,c,s=this,a=!1,w=!1;i=t.extend({},y,i);h=t(i.template);s.element=function(){return h};s.opener=function(){return r};s.options=t.proxy(o,s,i);s.handlers=t.proxy(o,s,i.handlers);s.resize=function(){a&&!w&&c.css("max-height",b()+"px").trigger("lity:resize",[s])};s.close=function(){if(a&&!w){w=!0;ct(s);var n=v();if(e&&(u.activeElement===h[0]||t.contains(h[0],u.activeElement)))try{e.focus()}catch(n){}return c.trigger("lity:close",[s]),h.removeClass("lity-opened").addClass("lity-closed"),p(c.add(h)).always(function(){c.trigger("lity:remove",[s]);h.remove();h=void 0;n.resolve()}),n.promise()}};l=lt(n,s,i.handlers,i.handler);h.attr(f,"false").addClass("lity-loading lity-opened lity-"+l.handler).appendTo("body").focus().on("click","[data-lity-close]",function(n){t(n.target).is("[data-lity-close]")&&s.close()}).trigger("lity:open",[s]);ht(s);t.when(l.content).always(k)}function r(n,i,r){n.preventDefault?(n.preventDefault(),r=t(this),n=r.data("lity-target")||r.attr("href")||r.attr("src")):r=t(r);var f=new at(n,t.extend({},r.data("lity-options")||r.data("lity"),i),r,u.activeElement);if(!n.preventDefault)return f}var u=n.document,a=t(n),v=t.Deferred,nt=t("html"),i=[],f="aria-hidden",c="lity-"+f,vt='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',y={handler:null,handlers:{image:w,inline:rt,youtube:ut,vimeo:ft,googlemaps:ot,facebookvideo:et,iframe:e},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...<\/div><div class="lity-container"><div class="lity-content"><\/div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;<\/button><\/div><\/div><\/div>'},yt=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,pt=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,wt=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,bt=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,kt=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,tt=function(){var i=u.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return n[t];return!1}();return w.test=function(n){return yt.test(n)},r.version="2.2.2",r.options=t.proxy(o,r,y),r.handlers=t.proxy(o,r,y.handlers),r.current=g,t(u).on("click.lity","[data-lity]",r),r})